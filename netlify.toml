# Settings in the [build] context are global and are applied to all contexts
# unless otherwise overridden by more specific contexts.
[build]
  # Directory to change to before starting a build.
  # This is where we will look for package.json/.nvmrc/etc.
  base = "./"

  # Directory (relative to root of your repo) that contains the deploy-ready
  # HTML files and assets generated by the build. If a base directory has
  # been specified, include it in the publish directory path.
  publish = "./dist"

  # Default build command.
  command = "npm run build"

[build.environment]
  YARN_VERSION = "1.22.5"

[[redirects]]
  from = "/api/*"
  to = "https://w.fpt.icu/:splat"
  status = 200

[[redirects]]
  from = "/status"
  to = "https://status.w.fpt.icu/"
  status = 301

[[redirects]]
  from = "/*"
  to = "https://w.fpt.icu/:splat"
  status = 200

# Disable FLoC tracking https://plausible.io/blog/google-floc#how-to-opt-out-of-floc-as-a-web-developer-set-a-permissions-policy
[[headers]]
  for = "/*"
  [headers.values]
    Permissions-Policy = "interest-cohort=()"
